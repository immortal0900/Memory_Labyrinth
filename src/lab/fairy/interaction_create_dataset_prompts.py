from core.game_dto.z_cache_data import cache_items
def get_system_prompt(maltoo: str) -> str:
    return f"""
    <세계관>
    레테(Lethe)는 기억과 망각이 섞인 중세 판타지 행성입니다. 어느 날 ‘암네시아’라 불린 대재앙이 일어나, 수많은 이들이 이름만 남기고 모든 기억을 잃었습니다. 기억을 잃은 망각자들은 각자의 정체성과 맞닿은 특별한 능력을 얻지만, 동시에 혼란과 폭주가 퍼져 세계는 몰락 위기에 빠졌습니다.
    기억을 둘러싼 혼돈 속에서 다양한 종족이 힘을 합쳐 ‘나르가 연합’이 탄생했고, 이들은 기억의 파편을 가공한 에너지 ‘디멘시움’을 중심으로 급격히 성장했습니다. 그러나 카다스라 불리는 기억의 던전은 여전히 미지와 위험으로 가득하며, 기억을 되찾지 못한 채 죽은 자들은 ‘기억의 죽음’ 상태에 빠져 존재를 잃습니다.
    세계 곳곳에는 각 종족의 국가, 망각자만의 사회, 광신도 수도회, 그리고 보이지 않는 고대의 존재들이 음울하게 얽혀 있습니다. 이 모든 비밀의 중심에는 기억의 존재 소토스와, 그의 축복을 받은 특별한 이들만이 드나들 수 있는 카다스가 자리합니다.
    </세계관>

    <게임 아이템 목록>
    {cache_items}
    </게임 아이템 목록>

    당신은 한국어 게임 도메인의 데이터 합성기입니다.

    의도(라벨)는 다음 다섯 가지로만 제한됩니다:
    - INVENTORY_ITEM_USE : 아이템 사용/장착/교체 요청
    - LIGHT_ON_ROOM      : 현재 던전 방의 불/조명/밝기 “켬”
    - LIGHT_OFF_ROOM     : 현재 던전 방의 불/조명/밝기 “끔”
    - MOVE_NEXT_ROOM     : 다음 방 경로 안내 요청 (보스 안내 기능 미포함)
    - NONE               : 모든 의도에 해당하지 않음(일반 대화/무관 요청)

    생성 규칙:
    1) 한국어 문장으로 작성하고, **반말/존댓말을 섞어** 다양하게 만드세요.
    2) **멀티라벨** 샘플을 일부 포함하되,
       - LIGHT_ON_ROOM과 LIGHT_OFF_ROOM은 **동시에 나오면 안 됩니다**.
       - NONE은 **단독 라벨**일 때만 허용됩니다.
    3) 문장은 **3자 이상**, 과도한 반복/중복/무의미 텍스트 금지.
    4) 출력은 **아래 JSON 스키마 하나**로만 반환하세요. 추가 설명/코드블록/주석 금지.
    5) 실제 게임에서 던전을 플레이하는 사람의 상황을 상상해서 만드세요.
    6) 질문의 글자 수는 30자 이내로 해주세요
    7) '디멘시움 힘이 느껴지는데, 조명 켤까?' 와 같이 사용자는 실제로 관심 없을 세계관 얘기 안한다는 것에 유의하세요.

    말투:{maltoo}

    출력 스키마:
    {{
      "samples": [
        {{"text": "<한국어 문장>", "labels": ["MOVE_NEXT_ROOM"]}},
        {{"text": "<한국어 문장>", "labels": ["LIGHT_ON_ROOM","MOVE_NEXT_ROOM"]}},
        {{"text": "<한국어 문장>", "labels": ["NONE"]}}
      ]
    }}
    """


HUMAN_CREATE_DATASET = """
다음 조건으로 **샘플 200개**를 생성해 주세요.

요건:
- 반말/존댓말이 섞이도록 다양한 말투
- 멀티라벨 샘플 **20~30%** 포함
- ON/OFF(켜/끄기) 동시 금지, NONE은 단독
- 세계관 단어는 일부 문장에만 자연스럽게 포함
- 의도-문장 의미 불일치 금지, 중복 금지

반드시 아래 **JSON 하나**로만 출력하세요:

[
    {"text": "...", "labels": ["MOVE_NEXT_ROOM"]},
    {"text": "...", "labels": ["LIGHT_ON_ROOM","MOVE_NEXT_ROOM"]},
    {"text": "...", "labels": ["NONE"]}
]
"""
